2025-05-24 15:35:01,958 [DEBUG] 服务器地址 127.0.0.1 解析成功
2025-05-24 15:35:01,959 [DEBUG] 成功连接到服务器 127.0.0.1:12345
2025-05-24 15:35:01,959 [DEBUG] 服务器地址 127.0.0.1 解析成功
2025-05-24 15:35:01,960 [DEBUG] 成功连接到服务器 127.0.0.1:12345
2025-05-24 15:35:08,378 [DEBUG] 初始化主窗口: 用户=why
2025-05-24 15:35:08,378 [DEBUG] 创建客户端线程
2025-05-24 15:35:08,379 [DEBUG] 客户端线程初始化
2025-05-24 15:35:08,379 [DEBUG] 找到可用UDP端口: 40577
2025-05-24 15:35:08,379 [DEBUG] 客户端线程开始运行
2025-05-24 15:35:08,380 [DEBUG] Opus编解码器初始化成功
2025-05-24 15:35:08,380 [DEBUG] Opus编解码器初始化: 采样率=48000, 通道数=1
2025-05-24 15:35:08,390 [DEBUG] Opus编解码器创建成功
2025-05-24 15:35:08,390 [DEBUG] UDP音频线程绑定到端口: 40577
2025-05-24 15:35:08,390 [DEBUG] UDP音频线程已启动，端口: 40577
2025-05-24 15:35:08,390 [DEBUG] 发送UDP端口更新消息: UDP_PORT_UPDATE|why|40577
2025-05-24 15:35:08,390 [DEBUG] UDP音频服务初始化完成，端口: 40577
2025-05-24 15:35:08,403 [DEBUG] UDP音频接收线程开始运行，端口: 40577
2025-05-24 15:35:08,409 [DEBUG] 初始化UI
2025-05-24 15:35:08,413 [DEBUG] 初始刷新好友和群组列表
2025-05-24 15:35:08,414 [DEBUG] 主窗口初始化完成，用户: why, UDP端口: 40577
2025-05-24 15:35:08,470 [DEBUG] 处理收到的消息: FRIEND_LIST|why_1:offline|gty:offline
2025-05-24 15:35:08,470 [DEBUG] 处理收到的消息: GROUP_LIST|1:first_grop|2:second_grop|3:third_grop|4:4|5:5
2025-05-24 15:35:18,198 [DEBUG] 处理收到的消息: FRIEND_ONLINE|why_1
2025-05-24 15:35:21,321 [DEBUG] 处理收到的消息: PRIVATE_HISTORY|why_1|1|why_1|[EMOJI]smart.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]smart.png|why_1|[EMOJI]facepalm.png|why_1|[EMOJI]gif4.gif|why|1|why_1|[EMOJI]smirk.png|why|1|why_1|2|why_1|[EMOJI]smirk.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why|[EMOJI]smart.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon19.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon31.png|why_1|诶呀|why_1|弄得差不多了|why|但是文件还不能下载，语音也打不通|why_1|[EMOJI]image_emoticon19.png|why_1|1|why|[EMOJI]gif2.gif
2025-05-24 15:35:21,391 [DEBUG] 处理收到的消息: FILE_LIST|client_20250516_225953.log|cxk.png
2025-05-24 15:35:26,044 [DEBUG] 尝试发起语音通话
2025-05-24 15:35:26,044 [DEBUG] 发起语音通话请求：why -> why_1
2025-05-24 15:35:26,044 [DEBUG] 准备发送通话请求: CALL_REQUEST|why|why_1|40577
2025-05-24 15:35:26,044 [DEBUG] 已发送CALL_REQUEST消息，本地UDP端口: 40577
2025-05-24 15:35:26,045 [ERROR] 发起通话请求失败: name 'AudioDeviceSelector' is not defined
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 2188, in start_voice_call
    self.call_dialog = CallDialog(
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 615, in __init__
    self.audio_devices = self.get_audio_devices()
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 645, in get_audio_devices
    dialog = AudioDeviceSelector(self)
NameError: name 'AudioDeviceSelector' is not defined
2025-05-24 15:35:27,547 [DEBUG] 处理收到的消息: CALL_RESPONSE|SENDING|why_1
2025-05-24 15:35:27,548 [DEBUG] 服务器确认正在向 why_1 发送通话请求
2025-05-24 15:35:30,493 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why_1|127.0.0.1|40165
2025-05-24 15:35:30,493 [DEBUG] 收到CALL_ACCEPTED: from=why_1, ip=127.0.0.1, port=40165
2025-05-24 15:35:30,493 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-24 15:35:30,493 [WARNING] 收到来自 why_1 的CALL_ACCEPTED，但当前没有活动通话
2025-05-24 15:35:30,993 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why_1|127.0.0.1|40165
2025-05-24 15:35:30,993 [DEBUG] 收到CALL_ACCEPTED: from=why_1, ip=127.0.0.1, port=40165
2025-05-24 15:35:30,993 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-24 15:35:30,993 [WARNING] 收到来自 why_1 的CALL_ACCEPTED，但当前没有活动通话
2025-05-24 15:35:31,493 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why_1|127.0.0.1|40165
2025-05-24 15:35:31,493 [DEBUG] 收到CALL_ACCEPTED: from=why_1, ip=127.0.0.1, port=40165
2025-05-24 15:35:31,493 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-24 15:35:31,493 [WARNING] 收到来自 why_1 的CALL_ACCEPTED，但当前没有活动通话
2025-05-24 15:35:36,123 [DEBUG] 尝试发起语音通话
2025-05-24 15:35:36,123 [DEBUG] 发起语音通话请求：why -> why_1
2025-05-24 15:35:36,123 [DEBUG] 准备发送通话请求: CALL_REQUEST|why|why_1|40577
2025-05-24 15:35:36,124 [DEBUG] 已发送CALL_REQUEST消息，本地UDP端口: 40577
2025-05-24 15:35:36,124 [ERROR] 发起通话请求失败: name 'AudioDeviceSelector' is not defined
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 2188, in start_voice_call
    self.call_dialog = CallDialog(
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 615, in __init__
    self.audio_devices = self.get_audio_devices()
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 645, in get_audio_devices
    dialog = AudioDeviceSelector(self)
NameError: name 'AudioDeviceSelector' is not defined
2025-05-24 15:35:36,141 [DEBUG] 处理收到的消息: CALL_RESPONSE|BUSY|why_1
2025-05-24 15:39:44,510 [DEBUG] 停止UDP音频线程，发送: 0 包，接收: 0 包
2025-05-24 15:39:44,510 [ERROR] UDP接收错误: [WinError 10038] 在一个非套接字上尝试了一个操作。
2025-05-24 15:39:44,612 [DEBUG] 停止客户端线程
2025-05-24 15:39:44,612 [WARNING] 服务器连接断开
2025-05-24 15:39:44,613 [DEBUG] 客户端线程结束
