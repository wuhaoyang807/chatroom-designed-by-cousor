2025-05-17 20:10:12,154 [DEBUG] 初始化主窗口: 用户=why
2025-05-17 20:10:12,154 [DEBUG] 创建客户端线程
2025-05-17 20:10:12,154 [DEBUG] 客户端线程初始化
2025-05-17 20:10:12,155 [DEBUG] 开始初始化UDP音频服务
2025-05-17 20:10:12,155 [DEBUG] 分配随机UDP端口: 54600
2025-05-17 20:10:12,155 [DEBUG] 客户端线程开始运行
2025-05-17 20:10:12,155 [DEBUG] 尝试绑定UDP端口: 54600
2025-05-17 20:10:12,156 [DEBUG] UDP端口绑定成功: 54600
2025-05-17 20:10:12,156 [DEBUG] 创建UDP音频线程，端口: 54600
2025-05-17 20:10:12,156 [DEBUG] UDP音频线程启动成功
2025-05-17 20:10:12,156 [DEBUG] 发送UDP端口更新消息: UDP_PORT_UPDATE|why|54600
2025-05-17 20:10:12,158 [DEBUG] UDP音频服务初始化完成，端口: 54600
2025-05-17 20:10:12,176 [DEBUG] 初始化UI
2025-05-17 20:10:12,179 [DEBUG] 初始刷新好友和群组列表
2025-05-17 20:10:12,179 [DEBUG] 主窗口初始化完成，用户: why, UDP端口: 54600
2025-05-17 20:10:12,228 [DEBUG] 处理收到的消息: FRIEND_LIST|why_1:offline|gty:online
2025-05-17 20:10:12,229 [DEBUG] 处理收到的消息: GROUP_LIST|1:first_grop|2:second_grop|3:third_grop|4:4
2025-05-17 20:10:14,449 [DEBUG] 处理收到的消息: PRIVATE_HISTORY|gty|1|why|2
2025-05-17 20:10:14,451 [DEBUG] 处理收到的消息: FILE_LIST|
2025-05-17 20:10:16,521 [DEBUG] 尝试发起语音通话
2025-05-17 20:10:16,522 [DEBUG] 发起语音通话请求：why -> gty
2025-05-17 20:10:16,522 [DEBUG] 准备发送通话请求: CALL_REQUEST|why|gty|54600
2025-05-17 20:10:16,523 [DEBUG] 已发送CALL_REQUEST消息，本地UDP端口: 54600
2025-05-17 20:10:16,531 [DEBUG] 已创建通话对话框(主叫方)
2025-05-17 20:10:18,026 [DEBUG] 处理收到的消息: CALL_RESPONSE|SENDING|gty
2025-05-17 20:10:18,027 [DEBUG] 服务器确认正在向 gty 发送通话请求
2025-05-17 20:10:28,300 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:10:28,301 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:10:28,800 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:10:28,801 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:10:29,301 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:10:29,302 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:10:58,370 [DEBUG] 尝试发起语音通话
2025-05-17 20:10:58,371 [DEBUG] 发起语音通话请求：why -> gty
2025-05-17 20:10:58,371 [DEBUG] 准备发送通话请求: CALL_REQUEST|why|gty|54600
2025-05-17 20:10:58,372 [DEBUG] 已发送CALL_REQUEST消息，本地UDP端口: 54600
2025-05-17 20:10:58,380 [DEBUG] 已创建通话对话框(主叫方)
2025-05-17 20:10:59,877 [DEBUG] 处理收到的消息: CALL_RESPONSE|SENDING|gty
2025-05-17 20:10:59,877 [DEBUG] 服务器确认正在向 gty 发送通话请求
2025-05-17 20:11:02,411 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:11:02,411 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:11:02,912 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:11:02,913 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:11:03,414 [DEBUG] 处理收到的消息: CALL_ACCEPTED|gty|172.18.204.180|63087
2025-05-17 20:11:03,415 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1354, in on_message
    caller_ip, caller_port = parts[2].split('|')
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 20:11:07,011 [DEBUG] 处理收到的消息: CALL_ENDED|gty
2025-05-17 20:11:16,965 [DEBUG] 处理收到的消息: EMOJI|gty|gif4.gif
2025-05-17 20:11:19,112 [DEBUG] 处理收到的消息: EMOJI|gty|image_emoticon31.png
2025-05-17 20:11:20,686 [DEBUG] 处理收到的消息: EMOJI|gty|image_emoticon6.png
2025-05-17 20:11:32,456 [DEBUG] 处理收到的消息: CALL_INCOMING|gty
2025-05-17 20:11:32,457 [DEBUG] ======= CALL_INCOMING详细调试信息 =======
2025-05-17 20:11:32,457 [DEBUG] 收到CALL_INCOMING消息: CALL_INCOMING|gty
2025-05-17 20:11:32,457 [DEBUG] 来电者: gty
2025-05-17 20:11:32,458 [DEBUG] 当前用户: why
2025-05-17 20:11:32,458 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-17 20:11:32,458 [DEBUG] 当前窗口状态: visible=True, active=True
2025-05-17 20:11:32,458 [DEBUG] 添加来电到待处理队列: gty
2025-05-17 20:11:32,459 [DEBUG] CALL_INCOMING已添加到待处理队列
2025-05-17 20:11:32,459 [DEBUG] ======= CALL_INCOMING详细调试信息结束 =======
2025-05-17 20:11:32,559 [DEBUG] 从待处理队列中处理来电: gty
2025-05-17 20:11:32,581 [DEBUG] 已显示通知窗口并从队列中移除: gty
2025-05-17 20:11:32,957 [DEBUG] 处理收到的消息: CALL_INCOMING|gty
2025-05-17 20:11:32,957 [DEBUG] ======= CALL_INCOMING详细调试信息 =======
2025-05-17 20:11:32,957 [DEBUG] 收到CALL_INCOMING消息: CALL_INCOMING|gty
2025-05-17 20:11:32,957 [DEBUG] 来电者: gty
2025-05-17 20:11:32,957 [DEBUG] 当前用户: why
2025-05-17 20:11:32,958 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-17 20:11:32,958 [DEBUG] 当前窗口状态: visible=True, active=False
2025-05-17 20:11:32,958 [DEBUG] 添加来电到待处理队列: gty
2025-05-17 20:11:32,958 [DEBUG] CALL_INCOMING已添加到待处理队列
2025-05-17 20:11:32,958 [DEBUG] ======= CALL_INCOMING详细调试信息结束 =======
2025-05-17 20:11:33,058 [DEBUG] 从待处理队列中处理来电: gty
2025-05-17 20:11:33,071 [DEBUG] 已显示通知窗口并从队列中移除: gty
2025-05-17 20:11:33,457 [DEBUG] 处理收到的消息: CALL_INCOMING|gty
2025-05-17 20:11:33,457 [DEBUG] ======= CALL_INCOMING详细调试信息 =======
2025-05-17 20:11:33,457 [DEBUG] 收到CALL_INCOMING消息: CALL_INCOMING|gty
2025-05-17 20:11:33,458 [DEBUG] 来电者: gty
2025-05-17 20:11:33,458 [DEBUG] 当前用户: why
2025-05-17 20:11:33,458 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-17 20:11:33,458 [DEBUG] 当前窗口状态: visible=True, active=False
2025-05-17 20:11:33,458 [DEBUG] 添加来电到待处理队列: gty
2025-05-17 20:11:33,458 [DEBUG] CALL_INCOMING已添加到待处理队列
2025-05-17 20:11:33,458 [DEBUG] ======= CALL_INCOMING详细调试信息结束 =======
2025-05-17 20:11:33,559 [DEBUG] 从待处理队列中处理来电: gty
2025-05-17 20:11:33,576 [DEBUG] 已显示通知窗口并从队列中移除: gty
2025-05-17 20:11:35,284 [DEBUG] 接受来电：gty
2025-05-17 20:11:35,284 [DEBUG] 准备发送CALL_ACCEPT: b'CALL_ACCEPT|why|gty|54600'
2025-05-17 20:11:35,285 [DEBUG] 已发送CALL_ACCEPT消息，本地UDP端口: 54600
2025-05-17 20:11:35,292 [DEBUG] 已创建通话对话框(被叫方)
2025-05-17 20:11:42,044 [DEBUG] 处理收到的消息: CALL_ENDED|gty
2025-05-17 20:15:05,947 [DEBUG] 停止客户端线程
2025-05-17 20:15:05,950 [WARNING] 服务器连接断开
2025-05-17 20:15:05,950 [DEBUG] 客户端线程结束
