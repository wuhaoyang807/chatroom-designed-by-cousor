2025-05-25 22:34:48,994 [DEBUG] 服务器地址 127.0.0.1 解析成功
2025-05-25 22:34:48,996 [DEBUG] 成功连接到服务器 127.0.0.1:12345
2025-05-25 22:34:48,998 [DEBUG] 服务器地址 127.0.0.1 解析成功
2025-05-25 22:34:49,008 [DEBUG] 成功连接到服务器 127.0.0.1:12345
2025-05-25 22:34:57,442 [DEBUG] 初始化主窗口: 用户=why_1
2025-05-25 22:34:57,453 [DEBUG] 创建客户端线程
2025-05-25 22:34:57,454 [DEBUG] 客户端线程初始化
2025-05-25 22:34:57,455 [DEBUG] 开始初始化UDP音频服务
2025-05-25 22:34:57,455 [DEBUG] 客户端线程开始运行
2025-05-25 22:34:57,455 [DEBUG] 分配随机UDP端口: 61401
2025-05-25 22:34:57,455 [DEBUG] 尝试绑定UDP端口: 61401
2025-05-25 22:34:57,456 [DEBUG] UDP端口绑定成功: 61401
2025-05-25 22:34:57,456 [DEBUG] 创建UDP音频线程，端口: 61401
2025-05-25 22:34:57,457 [DEBUG] UDP音频线程绑定到端口: 61401
2025-05-25 22:34:57,457 [DEBUG] UDP音频线程启动成功
2025-05-25 22:34:57,457 [DEBUG] 发送UDP端口更新消息: UDP_PORT_UPDATE|why_1|61401
2025-05-25 22:34:57,457 [DEBUG] UDP音频服务初始化完成，端口: 61401
2025-05-25 22:34:57,676 [DEBUG] 初始化UI
2025-05-25 22:34:57,679 [DEBUG] 初始刷新好友和群组列表
2025-05-25 22:34:57,680 [DEBUG] 主窗口初始化完成，用户: why_1, UDP端口: 61401
2025-05-25 22:34:57,727 [DEBUG] 处理收到的消息: FRIEND_LIST|why:online
2025-05-25 22:34:57,728 [DEBUG] 处理收到的消息: GROUP_LIST|1:first_grop|2:second_grop|3:third_grop|4:4|5:5
2025-05-25 22:35:04,560 [DEBUG] 处理收到的消息: PRIVATE_HISTORY|why_1|1|why_1|[EMOJI]smart.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]smart.png|why_1|[EMOJI]facepalm.png|why_1|[EMOJI]gif4.gif|why|1|why_1|[EMOJI]smirk.png|why|1|why_1|2|why_1|[EMOJI]smirk.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why|[EMOJI]smart.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon19.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon31.png|why_1|诶呀|why_1|弄得差不多了|why|但是文件还不能下载，语音也打不通|why_1|[EMOJI]image_emoticon19.png|why_1|1|why|[EMOJI]gif2.gif|why|1|why|2|why|[EMOJI]image_emoticon19.png|why|[EMOJI]image_emoticon19.png
2025-05-25 22:35:04,661 [DEBUG] 处理收到的消息: FILE_LIST|client_20250516_225953.log|cxk.png|facepalm.png|main.py
2025-05-25 22:35:06,225 [DEBUG] 处理收到的消息: CALL_INCOMING|why|127.0.0.1|57102
2025-05-25 22:35:06,226 [DEBUG] ======= CALL_INCOMING详细调试信息 =======
2025-05-25 22:35:06,226 [DEBUG] 收到CALL_INCOMING消息: CALL_INCOMING|why|127.0.0.1|57102
2025-05-25 22:35:06,226 [DEBUG] 来电者: why, 外网地址: 127.0.0.1:57102
2025-05-25 22:35:06,226 [DEBUG] 当前用户: why_1
2025-05-25 22:35:06,227 [DEBUG] 当前通话状态: in_call=False, call_target=None
2025-05-25 22:35:06,227 [DEBUG] 当前窗口状态: visible=True, active=False
2025-05-25 22:35:06,227 [DEBUG] 添加来电到待处理队列: why
2025-05-25 22:35:06,227 [DEBUG] CALL_INCOMING已添加到待处理队列
2025-05-25 22:35:06,227 [DEBUG] ======= CALL_INCOMING详细调试信息结束 =======
2025-05-25 22:35:06,328 [DEBUG] 从待处理队列中处理来电: why
2025-05-25 22:35:06,351 [DEBUG] 已显示通知窗口并从队列中移除: why
2025-05-25 22:35:10,405 [DEBUG] 接受来电：why
2025-05-25 22:35:10,406 [DEBUG] 准备发送CALL_ACCEPT: b'CALL_ACCEPT|why_1|why|61401'
2025-05-25 22:35:10,407 [DEBUG] 已发送CALL_ACCEPT消息，本地UDP端口: 61401
2025-05-25 22:35:10,419 [DEBUG] 收到NAT测试包来自: ('127.0.0.1', 57102)
2025-05-25 22:35:10,511 [DEBUG] 收到NAT测试包来自: ('127.0.0.1', 57102)
2025-05-25 22:35:10,545 [DEBUG] 处理收到的消息: CALL_CONNECT_INFO|why|127.0.0.1|57102
2025-05-25 22:35:10,546 [DEBUG] 收到CALL_CONNECT_INFO: caller=why, ip=127.0.0.1, port=57102
2025-05-25 22:35:10,546 [DEBUG] 接收方获得发起方UDP地址: ('127.0.0.1', 57102)
2025-05-25 22:35:10,547 [DEBUG] 创建新的通话对话框
2025-05-25 22:35:10,612 [DEBUG] 收到NAT测试包来自: ('127.0.0.1', 57102)
2025-05-25 22:35:10,712 [DEBUG] 收到NAT测试包来自: ('127.0.0.1', 57102)
2025-05-25 22:35:10,813 [DEBUG] 收到NAT测试包来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,068 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,128 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,198 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,258 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,328 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,388 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,448 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,518 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,578 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,648 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,708 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,768 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,838 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,898 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:11,969 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,028 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,089 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,158 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,217 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,283 [DEBUG] 用户选择的音频设备: {'input': 0, 'output': 2}
2025-05-25 22:35:12,285 [DEBUG] 开始通话: is_caller=False, target_addr=('127.0.0.1', 57102)
2025-05-25 22:35:12,285 [DEBUG] 开始NAT穿透，目标地址: ('127.0.0.1', 57102)
2025-05-25 22:35:12,286 [DEBUG] 发送NAT穿透包 1/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:12,288 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,349 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,395 [DEBUG] 发送NAT穿透包 2/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:12,408 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,479 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,497 [DEBUG] 发送NAT穿透包 3/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:12,539 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,599 [DEBUG] 发送NAT穿透包 4/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:12,608 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,669 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,701 [DEBUG] 发送NAT穿透包 5/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:12,728 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,799 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,803 [DEBUG] NAT穿透完成
2025-05-25 22:35:12,803 [DEBUG] 初始化音频播放器: output_device_index=2
2025-05-25 22:35:12,804 [DEBUG] 音频播放器已启动
2025-05-25 22:35:12,805 [DEBUG] 使用输出设备: Microsoft 声音映射器 - Output
2025-05-25 22:35:12,805 [DEBUG] 初始化音频录制器: input_device_index=0
2025-05-25 22:35:12,818 [DEBUG] 设备信息: {'index': 2, 'structVersion': 2, 'name': 'Microsoft 声音映射器 - Output', 'hostApi': 0, 'maxInputChannels': 0, 'maxOutputChannels': 2, 'defaultLowInputLatency': 0.09, 'defaultLowOutputLatency': 0.09, 'defaultHighInputLatency': 0.18, 'defaultHighOutputLatency': 0.18, 'defaultSampleRate': 44100.0}
2025-05-25 22:35:12,818 [DEBUG] 音频录制器已启动
2025-05-25 22:35:12,819 [DEBUG] 使用输入设备: Microsoft 声音映射器 - Input
2025-05-25 22:35:12,828 [DEBUG] 为接收方创建通话对话框
2025-05-25 22:35:12,829 [DEBUG] 设备信息: {'index': 0, 'structVersion': 2, 'name': 'Microsoft 声音映射器 - Input', 'hostApi': 0, 'maxInputChannels': 2, 'maxOutputChannels': 0, 'defaultLowInputLatency': 0.09, 'defaultLowOutputLatency': 0.09, 'defaultHighInputLatency': 0.18, 'defaultHighOutputLatency': 0.18, 'defaultSampleRate': 44100.0}
2025-05-25 22:35:12,850 [DEBUG] 开始音频播放...
2025-05-25 22:35:12,858 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,861 [DEBUG] 开始录音...
2025-05-25 22:35:12,928 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:12,989 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,049 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,118 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,178 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,249 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,309 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,369 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,438 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,499 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,569 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,630 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,688 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,758 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,819 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,889 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:13,949 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,008 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,079 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,139 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,208 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,269 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,329 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,399 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,459 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,529 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,589 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,648 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,718 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,779 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,849 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,909 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:14,968 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,039 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,099 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,170 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,228 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,289 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,359 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,418 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,489 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,548 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,608 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,678 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,738 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,809 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,869 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,929 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:15,999 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,058 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,068 [DEBUG] 发送UDP音频数据: 包 #50, 2048 字节，到外网地址: ('127.0.0.1', 57102)
2025-05-25 22:35:16,129 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,189 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,249 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,319 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,379 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,448 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:16,508 [DEBUG] 收到UDP音频数据: 2048 字节，来自: ('127.0.0.1', 57102)
2025-05-25 22:35:18,666 [DEBUG] 用户取消音频设备选择，使用默认设备
2025-05-25 22:35:18,668 [DEBUG] 开始通话: is_caller=False, target_addr=('127.0.0.1', 57102)
2025-05-25 22:35:18,668 [DEBUG] 开始NAT穿透，目标地址: ('127.0.0.1', 57102)
2025-05-25 22:35:18,669 [DEBUG] 发送NAT穿透包 1/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:18,770 [DEBUG] 发送NAT穿透包 2/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:18,870 [DEBUG] 发送NAT穿透包 3/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:18,971 [DEBUG] 发送NAT穿透包 4/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:19,072 [DEBUG] 发送NAT穿透包 5/5 到 ('127.0.0.1', 57102)
2025-05-25 22:35:19,173 [DEBUG] NAT穿透完成
2025-05-25 22:35:19,205 [DEBUG] 初始化音频播放器: output_device_index=3
2025-05-25 22:35:19,205 [DEBUG] 音频播放器已启动
2025-05-25 22:35:19,206 [DEBUG] 使用输出设备: 扬声器 (Realtek(R) Audio)
2025-05-25 22:35:19,207 [DEBUG] 初始化音频录制器: input_device_index=1
2025-05-25 22:35:19,207 [DEBUG] 设备信息: {'index': 3, 'structVersion': 2, 'name': '扬声器 (Realtek(R) Audio)', 'hostApi': 0, 'maxInputChannels': 0, 'maxOutputChannels': 2, 'defaultLowInputLatency': 0.09, 'defaultLowOutputLatency': 0.09, 'defaultHighInputLatency': 0.18, 'defaultHighOutputLatency': 0.18, 'defaultSampleRate': 44100.0}
2025-05-25 22:35:19,207 [DEBUG] 音频录制器已启动
2025-05-25 22:35:19,214 [DEBUG] 已创建通话对话框(被叫方)，目标地址: ('127.0.0.1', 57102)
2025-05-25 22:35:19,222 [DEBUG] 开始音频播放...
2025-05-25 22:35:19,234 [DEBUG] 开始录音...
2025-05-25 22:35:19,269 [DEBUG] 录制到音频数据: 包 #100, 2048 字节
2025-05-25 22:35:19,269 [DEBUG] 发送UDP音频数据: 包 #100, 2048 字节，到外网地址: ('127.0.0.1', 57102)
2025-05-25 22:35:19,963 [DEBUG] 结束通话
