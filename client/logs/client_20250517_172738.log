2025-05-17 17:27:46,653 [DEBUG] 初始化主窗口: 用户=why_1
2025-05-17 17:27:46,654 [DEBUG] 创建客户端线程
2025-05-17 17:27:46,655 [DEBUG] 客户端线程初始化
2025-05-17 17:27:46,656 [DEBUG] 开始初始化UDP音频服务
2025-05-17 17:27:46,656 [DEBUG] 分配随机UDP端口: 64895
2025-05-17 17:27:46,656 [DEBUG] 客户端线程开始运行
2025-05-17 17:27:46,660 [DEBUG] 尝试绑定UDP端口: 64895
2025-05-17 17:27:46,671 [DEBUG] UDP端口绑定成功: 64895
2025-05-17 17:27:46,676 [DEBUG] 创建UDP音频线程，端口: 64895
2025-05-17 17:27:46,684 [DEBUG] UDP音频线程启动成功
2025-05-17 17:27:46,684 [DEBUG] 发送UDP端口更新消息: UDP_PORT_UPDATE|why_1|64895
2025-05-17 17:27:46,695 [DEBUG] UDP音频服务初始化完成，端口: 64895
2025-05-17 17:27:46,734 [DEBUG] 初始化UI
2025-05-17 17:27:46,765 [DEBUG] 初始刷新好友和群组列表
2025-05-17 17:27:46,769 [DEBUG] 主窗口初始化完成，用户: why_1, UDP端口: 64895
2025-05-17 17:27:46,879 [DEBUG] 处理收到的消息: FRIEND_LIST|why:online
2025-05-17 17:27:46,883 [DEBUG] 处理收到的消息: GROUP_LIST|1:first_grop|2:second_grop|3:third_grop|4:4
2025-05-17 17:27:49,808 [DEBUG] 处理收到的消息: PRIVATE_HISTORY|why_1|1|why_1|[EMOJI]smart.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]smart.png|why_1|[EMOJI]facepalm.png|why_1|[EMOJI]gif4.gif|why|1|why_1|[EMOJI]smirk.png|why|1|why_1|2|why_1|[EMOJI]smirk.png|why_1|[EMOJI]gif4.gif|why_1|[EMOJI]gif4.gif|why|[EMOJI]smart.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]image_emoticon6.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon19.png|why|[EMOJI]gif4.gif|why_1|[EMOJI]image_emoticon31.png|why_1|诶呀|why_1|弄得差不多了|why|但是文件还不能下载，语音也打不通|why_1|[EMOJI]image_emoticon19.png
2025-05-17 17:27:50,032 [DEBUG] 处理收到的消息: FILE_LIST|client_20250516_225953.log
2025-05-17 17:27:58,522 [DEBUG] 尝试发起语音通话
2025-05-17 17:27:58,524 [DEBUG] 发起语音通话请求：why_1 -> why
2025-05-17 17:27:58,530 [DEBUG] 准备发送通话请求: CALL_REQUEST|why_1|why|64895
2025-05-17 17:27:58,536 [DEBUG] 已发送CALL_REQUEST消息，本地UDP端口: 64895
2025-05-17 17:27:58,585 [DEBUG] 已创建通话对话框(主叫方)
2025-05-17 17:28:00,042 [DEBUG] 处理收到的消息: CALL_RESPONSE|SENDING|why
2025-05-17 17:28:00,046 [DEBUG] 服务器确认正在向 why 发送通话请求
2025-05-17 17:28:17,386 [DEBUG] 处理收到的消息: CALL_REJECTED|why
2025-05-17 17:28:38,440 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why|127.0.0.1|40274
2025-05-17 17:28:38,443 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1287, in on_message
    caller_ip, caller_port = parts[2].split('|')
    ^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 17:28:38,940 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why|127.0.0.1|40274
2025-05-17 17:28:38,944 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1287, in on_message
    caller_ip, caller_port = parts[2].split('|')
    ^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 17:28:39,441 [DEBUG] 处理收到的消息: CALL_ACCEPTED|why|127.0.0.1|40274
2025-05-17 17:28:39,444 [ERROR] 处理通话接受消息出错: not enough values to unpack (expected 2, got 1)
Traceback (most recent call last):
  File "D:\OneDrive\Desktop\cursor_try_chat_app\client\main.py", line 1287, in on_message
    caller_ip, caller_port = parts[2].split('|')
    ^^^^^^^^^^^^^^^^^^^^^^
ValueError: not enough values to unpack (expected 2, got 1)
2025-05-17 17:28:46,832 [DEBUG] 处理收到的消息: CALL_REJECTED|why
2025-05-17 17:29:01,598 [INFO] 开始下载文件: client_20250516_225953.log
2025-05-17 17:29:01,599 [INFO] 文件信息: 大小=4212, 块数=1
